[gd_scene load_steps=17 format=3 uid="uid://dggk7jcm1w68b"]

[ext_resource type="Script" uid="uid://cx421lp25qqst" path="res://script/test_1.gd" id="1_j8csh"]
[ext_resource type="TileSet" uid="uid://cgtqkobc1t5o4" path="res://resource/ground_tileset.tres" id="1_y5gqq"]
[ext_resource type="Material" uid="uid://cheyp1m0gglwj" path="res://wall_material.tres" id="2_2j80u"]
[ext_resource type="Texture2D" uid="uid://cgnxe4gjl5u3n" path="res://texture/test_texture.png" id="2_5i238"]
[ext_resource type="Texture2D" uid="uid://c7d3b2ogwqp5r" path="res://texture/light_texture.tres" id="3_0usje"]
[ext_resource type="Texture2D" uid="uid://dynuwbglo64i4" path="res://texture/white_faded_spot.png" id="3_acc71"]
[ext_resource type="Texture2D" uid="uid://cnus3k6seha64" path="res://texture/character-woman.png" id="5_05cft"]
[ext_resource type="Script" uid="uid://c307mydkveam4" path="res://script/character_body_2d.gd" id="7_iqic2"]

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_08x6e"]
cull_mode = 2
polygon = PackedVector2Array(32, 40, 48, 40, 48, 56, 32, 56)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_12hek"]
cull_mode = 2
polygon = PackedVector2Array(160, 176, 192, 176, 192, 192, 160, 192)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_f2ac7"]
cull_mode = 2
polygon = PackedVector2Array(224, 176, 240, 176, 240, 192, 224, 192)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_s3bqj"]
cull_mode = 2
polygon = PackedVector2Array(176, 128, 208, 128, 208, 144, 176, 144)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_cfdbi"]
cull_mode = 2
polygon = PackedVector2Array(208, 112, 240, 112, 240, 128, 208, 128)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_yqlo0"]
cull_mode = 2
polygon = PackedVector2Array(240, 160, 256, 160, 256, 176, 240, 176)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_yrid7"]
cull_mode = 2
polygon = PackedVector2Array(288, 176, 320, 176, 320, 192, 288, 192)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_uvd1e"]
radius = 2.0
height = 10.0

[node name="test_1" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_j8csh")

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.226707, 0.226707, 0.226707, 1)

[node name="Node2D2" type="Node2D" parent="."]

[node name="LightOccluder2D2" type="LightOccluder2D" parent="Node2D2"]
position = Vector2(0, -1)
scale = Vector2(0.999, 0.968)
occluder = SubResource("OccluderPolygon2D_08x6e")

[node name="LightOccluder2D3" type="LightOccluder2D" parent="Node2D2"]
position = Vector2(0, -16)
scale = Vector2(0.991067, 0.972953)
occluder = SubResource("OccluderPolygon2D_08x6e")

[node name="Sprite2D" type="Sprite2D" parent="Node2D2"]
material = ExtResource("2_2j80u")
position = Vector2(32, 55)
texture = ExtResource("2_5i238")
centered = false
offset = Vector2(0, -16)
region_enabled = true
region_rect = Rect2(48, 80, 16, 16)

[node name="Sprite2D2" type="Sprite2D" parent="Node2D2"]
material = ExtResource("2_2j80u")
position = Vector2(32, 23)
texture = ExtResource("2_5i238")
centered = false
region_enabled = true
region_rect = Rect2(48, 64, 16, 16)

[node name="PointLight2D" type="PointLight2D" parent="."]
position = Vector2(39, 8)
shadow_enabled = true
texture = ExtResource("3_0usje")
texture_scale = 0.3

[node name="ground" type="TileMap" parent="."]
y_sort_enabled = true
tile_set = ExtResource("1_y5gqq")
format = 2
layer_0/y_sort_enabled = true
layer_0/z_index = -1
layer_0/tile_data = PackedInt32Array(0, 262145, 5, 65536, 262145, 5, 131072, 262145, 5, 196608, 262145, 5, 262144, 262145, 5, 327680, 262145, 5, 393216, 262145, 5, 458752, 262145, 5, 524288, 262145, 5, 589824, 262145, 5, 655360, 262145, 5, 720896, 262145, 5, 786432, 262145, 5, 851968, 262145, 5, 917504, 262145, 5, 983040, 262145, 5, 1048576, 262145, 5, 1114112, 262145, 5, 1, 262145, 5, 65537, 262145, 5, 131073, 262145, 5, 196609, 262145, 5, 262145, 262145, 5, 327681, 262145, 5, 393217, 262145, 5, 458753, 262145, 5, 524289, 262145, 5, 589825, 262145, 5, 655361, 262145, 5, 720897, 262145, 5, 786433, 262145, 5, 851969, 262145, 5, 917505, 262145, 5, 983041, 262145, 5, 1048577, 262145, 5, 1114113, 262145, 5, 1179649, 262145, 5, 2, 262145, 5, 65538, 262145, 5, 131074, 262145, 5, 196610, 262145, 5, 262146, 262145, 5, 327682, 262145, 5, 393218, 262145, 5, 458754, 262145, 5, 524290, 262145, 5, 589826, 262145, 5, 655362, 262145, 5, 720898, 262145, 5, 786434, 262145, 5, 851970, 262145, 5, 917506, 262145, 5, 983042, 262145, 5, 1048578, 262145, 5, 1114114, 262145, 5, 1179650, 262145, 5, 3, 262145, 5, 65539, 262145, 5, 131075, 262145, 5, 196611, 262145, 5, 262147, 262145, 5, 327683, 262145, 5, 393219, 262145, 5, 458755, 262145, 5, 524291, 262145, 5, 589827, 262145, 5, 655363, 262145, 5, 720899, 262145, 5, 786435, 262145, 5, 851971, 262145, 5, 917507, 262145, 5, 983043, 262145, 5, 1048579, 262145, 5, 1114115, 262145, 5, 1179651, 262145, 5, 4, 262145, 5, 65540, 262145, 5, 131076, 262145, 5, 196612, 262145, 5, 262148, 262145, 5, 327684, 262145, 5, 393220, 262145, 5, 458756, 262145, 5, 524292, 262145, 5, 589828, 262145, 5, 655364, 262145, 5, 720900, 262145, 5, 786436, 262145, 5, 851972, 262145, 5, 917508, 262145, 5, 983044, 262145, 5, 1048580, 262145, 5, 1114116, 262145, 5, 1179652, 262145, 5, 5, 262145, 5, 65541, 262145, 5, 131077, 262145, 5, 196613, 262145, 5, 262149, 262145, 5, 327685, 262145, 5, 393221, 262145, 5, 458757, 262145, 5, 524293, 262145, 5, 589829, 262145, 5, 655365, 262145, 5, 720901, 262145, 5, 786437, 262145, 5, 851973, 262145, 5, 917509, 262145, 5, 983045, 262145, 5, 1048581, 262145, 5, 1114117, 262145, 5, 1179653, 262145, 5, 6, 262145, 5, 65542, 262145, 5, 131078, 262145, 5, 196614, 262145, 5, 262150, 262145, 5, 327686, 262145, 5, 393222, 262145, 5, 458758, 262145, 5, 524294, 262145, 5, 589830, 262145, 5, 655366, 262145, 5, 720902, 262145, 5, 786438, 262145, 5, 851974, 262145, 5, 917510, 262145, 5, 983046, 262145, 5, 1048582, 262145, 5, 1114118, 262145, 5, 1179654, 262145, 5, 7, 262145, 5, 65543, 262145, 5, 131079, 262145, 5, 196615, 262145, 5, 262151, 262145, 5, 327687, 262145, 5, 393223, 262145, 5, 458759, 262145, 5, 524295, 262145, 5, 589831, 262145, 5, 655367, 262145, 5, 720903, 262145, 5, 786439, 262145, 5, 851975, 262145, 5, 917511, 262145, 5, 983047, 262145, 5, 1048583, 262145, 5, 1114119, 262145, 5, 1179655, 262145, 5, 8, 262145, 5, 65544, 262145, 5, 131080, 262145, 5, 196616, 262145, 5, 262152, 262145, 5, 327688, 262145, 5, 393224, 262145, 5, 458760, 262145, 5, 524296, 262145, 5, 589832, 262145, 5, 655368, 262145, 5, 720904, 262145, 5, 786440, 262145, 5, 851976, 262145, 5, 917512, 262145, 5, 983048, 262145, 5, 1048584, 262145, 5, 1114120, 262145, 5, 1179656, 262145, 5, 9, 262145, 5, 65545, 262145, 5, 131081, 262145, 5, 196617, 262145, 5, 262153, 262145, 5, 327689, 262145, 5, 393225, 262145, 5, 458761, 262145, 5, 524297, 262145, 5, 589833, 262145, 5, 655369, 262145, 5, 720905, 262145, 5, 786441, 262145, 5, 851977, 262145, 5, 917513, 262145, 5, 983049, 262145, 5, 1048585, 262145, 5, 1114121, 262145, 5, 1179657, 262145, 5, 10, 262145, 5, 65546, 262145, 5, 131082, 262145, 5, 196618, 262145, 5, 262154, 262145, 5, 327690, 262145, 5, 393226, 262145, 5, 458762, 262145, 5, 524298, 262145, 5, 589834, 262145, 5, 655370, 262145, 5, 720906, 262145, 5, 786442, 262145, 5, 851978, 262145, 5, 917514, 262145, 5, 983050, 262145, 5, 1048586, 262145, 5, 1114122, 262145, 5, 1179658, 262145, 5, 11, 262145, 5, 65547, 262145, 5, 131083, 262145, 5, 196619, 262145, 5, 262155, 262145, 5, 327691, 262145, 5, 393227, 262145, 5, 458763, 262145, 5, 524299, 262145, 5, 589835, 262145, 5, 655371, 262145, 5, 720907, 262145, 5, 786443, 262145, 5, 851979, 262145, 5, 917515, 262145, 5, 983051, 262145, 5, 1048587, 262145, 5, 1114123, 262145, 5, 1179659, 262145, 5, 12, 262145, 5, 65548, 262145, 5, 131084, 262145, 5, 196620, 262145, 5, 262156, 262145, 5, 327692, 262145, 5, 393228, 262145, 5, 458764, 262145, 5, 524300, 262145, 5, 589836, 262145, 5, 655372, 262145, 5, 720908, 262145, 5, 786444, 262145, 5, 851980, 262145, 5, 917516, 262145, 5, 983052, 262145, 5, 1048588, 262145, 5, 1114124, 262145, 5, 1179660, 262145, 5, 13, 262145, 5, 65549, 262145, 5, 131085, 262145, 5, 196621, 262145, 5, 262157, 262145, 5, 327693, 262145, 5, 393229, 262145, 5, 458765, 262145, 5, 524301, 262145, 5, 589837, 262145, 5, 655373, 262145, 5, 720909, 262145, 5, 786445, 262145, 5, 851981, 262145, 5, 917517, 262145, 5, 983053, 262145, 5, 1048589, 262145, 5, 1114125, 262145, 5, 1179661, 262145, 5, 14, 262145, 5, 65550, 262145, 5, 131086, 262145, 5, 196622, 262145, 5, 262158, 262145, 5, 327694, 262145, 5, 393230, 262145, 5, 458766, 262145, 5, 524302, 262145, 5, 589838, 262145, 5, 655374, 262145, 5, 720910, 262145, 5, 786446, 262145, 5, 851982, 262145, 5, 917518, 262145, 5, 983054, 262145, 5, 1048590, 262145, 5, 1114126, 262145, 5, 1179662, 262145, 5, 15, 262145, 5, 65551, 262145, 5, 131087, 262145, 5, 196623, 262145, 5, 262159, 262145, 5, 327695, 262145, 5, 393231, 262145, 5, 458767, 262145, 5, 524303, 262145, 5, 589839, 262145, 5, 655375, 262145, 5, 720911, 262145, 5, 786447, 262145, 5, 851983, 262145, 5, 917519, 262145, 5, 983055, 262145, 5, 1048591, 262145, 5, 1114127, 262145, 5, 1179663, 262145, 5, 16, 262145, 5, 65552, 262145, 5, 131088, 262145, 5, 196624, 262145, 5, 262160, 262145, 5, 327696, 262145, 5, 393232, 262145, 5, 458768, 262145, 5, 524304, 262145, 5, 589840, 262145, 5, 655376, 262145, 5, 720912, 262145, 5, 786448, 262145, 5, 851984, 262145, 5, 917520, 262145, 5, 983056, 262145, 5, 1048592, 262145, 5, 1114128, 262145, 5, 1179664, 262145, 5, 17, 262145, 5, 65553, 262145, 5, 131089, 262145, 5, 196625, 262145, 5, 262161, 262145, 5, 327697, 262145, 5, 393233, 262145, 5, 458769, 262145, 5, 524305, 262145, 5, 589841, 262145, 5, 655377, 262145, 5, 720913, 262145, 5, 786449, 262145, 5, 851985, 262145, 5, 917521, 262145, 5, 983057, 262145, 5, 1048593, 262145, 5, 1114129, 262145, 5, 1179665, 262145, 5, 18, 262145, 5, 65554, 262145, 5, 131090, 262145, 5, 196626, 262145, 5, 262162, 262145, 5, 327698, 262145, 5, 393234, 262145, 5, 458770, 262145, 5, 524306, 262145, 5, 589842, 262145, 5, 655378, 262145, 5, 720914, 262145, 5, 786450, 262145, 5, 851986, 262145, 5, 917522, 262145, 5, 983058, 262145, 5, 1048594, 262145, 5, 1114130, 262145, 5, 1179666, 262145, 5, 19, 262145, 5, 65555, 262145, 5, 131091, 262145, 5, 196627, 262145, 5, 262163, 262145, 5, 327699, 262145, 5, 393235, 262145, 5, 458771, 262145, 5, 524307, 262145, 5, 589843, 262145, 5, 655379, 262145, 5, 720915, 262145, 5, 786451, 262145, 5, 851987, 262145, 5, 917523, 262145, 5, 983059, 262145, 5, 1048595, 262145, 5, 1114131, 262145, 5, 1179667, 262145, 5, 20, 262145, 5, 65556, 262145, 5, 131092, 262145, 5, 196628, 262145, 5, 262164, 262145, 5, 327700, 262145, 5, 393236, 262145, 5, 458772, 262145, 5, 524308, 262145, 5, 589844, 262145, 5, 655380, 262145, 5, 720916, 262145, 5, 786452, 262145, 5, 851988, 262145, 5, 917524, 262145, 5, 983060, 262145, 5, 1048596, 262145, 5, 1114132, 262145, 5, 1179668, 262145, 5, 21, 262145, 5, 65557, 262145, 5, 131093, 262145, 5, 196629, 262145, 5, 262165, 262145, 5, 327701, 262145, 5, 393237, 262145, 5, 458773, 262145, 5, 524309, 262145, 5, 589845, 262145, 5, 655381, 262145, 5, 720917, 262145, 5, 786453, 262145, 5, 851989, 262145, 5, 917525, 262145, 5, 983061, 262145, 5, 1048597, 262145, 5, 1114133, 262145, 5, 1179669, 262145, 5, 22, 262145, 5, 65558, 262145, 5, 131094, 262145, 5, 196630, 262145, 5, 262166, 262145, 5, 327702, 262145, 5, 393238, 262145, 5, 458774, 262145, 5, 524310, 262145, 5, 589846, 262145, 5, 655382, 262145, 5, 720918, 262145, 5, 786454, 262145, 5, 851990, 262145, 5, 917526, 262145, 5, 983062, 262145, 5, 1048598, 262145, 5, 1114134, 262145, 5, 1179670, 262145, 5, 23, 262145, 5, 65559, 262145, 5, 131095, 262145, 5, 196631, 262145, 5, 262167, 262145, 5, 327703, 262145, 5, 393239, 262145, 5, 458775, 262145, 5, 524311, 262145, 5, 589847, 262145, 5, 655383, 262145, 5, 720919, 262145, 5, 786455, 262145, 5, 851991, 262145, 5, 917527, 262145, 5, 983063, 262145, 5, 1048599, 262145, 5, 1114135, 262145, 5, 1179671, 262145, 5, 24, 262145, 5, 65560, 262145, 5, 131096, 262145, 5, 196632, 262145, 5, 262168, 262145, 5, 327704, 262145, 5, 393240, 262145, 5, 458776, 262145, 5, 524312, 262145, 5, 589848, 262145, 5, 655384, 262145, 5, 720920, 262145, 5, 786456, 262145, 5, 851992, 262145, 5, 917528, 262145, 5, 983064, 262145, 5, 1048600, 262145, 5, 1114136, 262145, 5, 1179672, 262145, 5, 25, 262145, 5, 65561, 262145, 5, 131097, 262145, 5, 196633, 262145, 5, 262169, 262145, 5, 327705, 262145, 5, 393241, 262145, 5, 458777, 262145, 5, 524313, 262145, 5, 589849, 262145, 5, 655385, 262145, 5, 720921, 262145, 5, 786457, 262145, 5, 851993, 262145, 5, 917529, 262145, 5, 983065, 262145, 5, 1048601, 262145, 5, 1114137, 262145, 5, 1179673, 262145, 5, 26, 262145, 5, 65562, 262145, 5, 131098, 262145, 5, 196634, 262145, 5, 262170, 262145, 5, 327706, 262145, 5, 393242, 262145, 5, 458778, 262145, 5, 524314, 262145, 5, 589850, 262145, 5, 655386, 262145, 5, 720922, 262145, 5, 786458, 262145, 5, 851994, 262145, 5, 917530, 262145, 5, 983066, 262145, 5, 1048602, 262145, 5, 1114138, 262145, 5, 1179674, 262145, 5, 27, 262145, 5, 65563, 262145, 5, 131099, 262145, 5, 196635, 262145, 5, 262171, 262145, 5, 327707, 262145, 5, 393243, 262145, 5, 458779, 262145, 5, 524315, 262145, 5, 589851, 262145, 5, 655387, 262145, 5, 720923, 262145, 5, 786459, 262145, 5, 851995, 262145, 5, 917531, 262145, 5, 983067, 262145, 5, 1048603, 262145, 5, 1114139, 262145, 5, 1179675, 262145, 5, 28, 262145, 5, 65564, 262145, 5, 131100, 262145, 5, 196636, 262145, 5, 262172, 262145, 5, 327708, 262145, 5, 393244, 262145, 5, 458780, 262145, 5, 524316, 262145, 5, 589852, 262145, 5, 655388, 262145, 5, 720924, 262145, 5, 786460, 262145, 5, 851996, 262145, 5, 917532, 262145, 5, 983068, 262145, 5, 1048604, 262145, 5, 1114140, 262145, 5, 1179676, 262145, 5, 29, 262145, 5, 65565, 262145, 5, 131101, 262145, 5, 196637, 262145, 5, 262173, 262145, 5, 327709, 262145, 5, 393245, 262145, 5, 458781, 262145, 5, 524317, 262145, 5, 589853, 262145, 5, 655389, 262145, 5, 720925, 262145, 5, 786461, 262145, 5, 851997, 262145, 5, 917533, 262145, 5, 983069, 262145, 5, 1048605, 262145, 5, 1114141, 262145, 5, 1179677, 262145, 5, 1179648, 262145, 5, 1245184, 262145, 5, 1245185, 262145, 5, 1245186, 262145, 5, 1245187, 262145, 5, 1245188, 262145, 5, 1245189, 262145, 5, 1245190, 262145, 5, 1245191, 262145, 5, 1245192, 262145, 5, 1245193, 262145, 5, 1245194, 262145, 5, 1245195, 262145, 5, 1245196, 262145, 5, 1245197, 262145, 5, 1245198, 262145, 5, 1245199, 262145, 5, 1245200, 262145, 5, 1245201, 262145, 5, 1245202, 262145, 5, 1245203, 262145, 5, 1245204, 262145, 5, 1245205, 262145, 5, 1245206, 262145, 5, 1245207, 262145, 5, 1245208, 262145, 5, 1245209, 262145, 5, 1245210, 262145, 5, 1245211, 262145, 5, 1245212, 262145, 5, 1245213, 262145, 5)
layer_1/name = "Layer1"
layer_1/y_sort_enabled = true
layer_1/tile_data = PackedInt32Array(720907, 131073, 5, 720906, 1, 5, 524299, 65537, 5, 458765, 65537, 5, 458766, 65537, 5, 524300, 131073, 3, 720910, 1, 5, 655375, 131073, 5, 720915, 131073, 5, 720914, 1, 5, 655370, 262145, 4, 589834, 262145, 4, 524298, 262145, 4, 458764, 262145, 4, 458767, 262145, 4, 524303, 262145, 4, 589839, 262145, 4, 655374, 262145, 4, 655379, 262145, 4, 589843, 262145, 4)
layer_2/name = "Layer2"
layer_2/y_sort_enabled = true
layer_2/tile_data = PackedInt32Array(720907, 131073, 4, 720906, 1, 2, 655370, 196609, 1, 589834, 196609, 1, 524298, 1, 0, 524299, 65537, 4, 524300, 131073, 2, 458764, 1, 0, 458765, 65537, 4, 458766, 65537, 4, 458767, 131073, 0, 524303, 196609, 1, 589839, 196609, 1, 655375, 131073, 2, 655374, 1, 0, 720910, 196609, 2, 720914, 1, 4, 720915, 131073, 2, 589843, 196609, 0, 655379, 196609, 1)
metadata/_edit_group_ = true

[node name="LightOccluder2D" type="LightOccluder2D" parent="ground"]
occluder = SubResource("OccluderPolygon2D_12hek")

[node name="LightOccluder2D2" type="LightOccluder2D" parent="ground"]
occluder = SubResource("OccluderPolygon2D_f2ac7")

[node name="LightOccluder2D3" type="LightOccluder2D" parent="ground"]
occluder = SubResource("OccluderPolygon2D_s3bqj")

[node name="LightOccluder2D4" type="LightOccluder2D" parent="ground"]
occluder = SubResource("OccluderPolygon2D_cfdbi")

[node name="LightOccluder2D5" type="LightOccluder2D" parent="ground"]
occluder = SubResource("OccluderPolygon2D_yqlo0")

[node name="LightOccluder2D6" type="LightOccluder2D" parent="ground"]
occluder = SubResource("OccluderPolygon2D_yrid7")

[node name="Node2D" type="Node2D" parent="."]
light_mask = 3
position = Vector2(205, 202)
metadata/_edit_group_ = true

[node name="light_shadow" type="PointLight2D" parent="Node2D"]
energy = 0.6
shadow_enabled = true
shadow_filter = 2
texture = ExtResource("3_acc71")
texture_scale = 0.3

[node name="light_supplement" type="PointLight2D" parent="Node2D"]
energy = 0.8
range_item_cull_mask = 2
shadow_filter = 2
texture = ExtResource("3_acc71")
texture_scale = 0.3

[node name="CharacterBody2D" type="CharacterBody2D" parent="."]
y_sort_enabled = true
position = Vector2(205, 202)
collision_mask = 2
script = ExtResource("7_iqic2")
character_speed = 90.0
metadata/_edit_group_ = true

[node name="Sprite2D2" type="Sprite2D" parent="CharacterBody2D"]
light_mask = 2
y_sort_enabled = true
texture = ExtResource("5_05cft")
offset = Vector2(0, -16)
region_enabled = true
region_rect = Rect2(16, 208, 32, 32)

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D"]
rotation = 1.5708
shape = SubResource("CapsuleShape2D_uvd1e")
